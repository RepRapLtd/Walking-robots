
This README is work in progress, and more a collection of our development notes at the moment.

Installation
============

$ pip3 install git+https://github.com/pimoroni/VL53L0X-python.git
$ cd VL53L0X-python
$ make
$ cd ~/.local/lib/python3.7/site-packages
$ mv vl53l0x_python.cpython-37m-arm-linux-gnueabihf.so vl53l0x_python.cpython-37m-arm-linux-gnueabihf.so.old
$ cp ----/VL53L0X-python/bin/vl53l0x_python.so vl53l0x_python.cpython-37m-arm-linux-gnueabihf.so


$ python3 -m pip install git+https://github.com/domdfcoding/whiptail@master --user

$ sudo pip3 install adafruit-circuitpython-servokit

$ sudo pip3 install adafruit-circuitpython-mpu6050




Interactive Terminal Control Program
====================================

$ python3 petoi.py




What I2C devices do we have?
============================

sudo i2cdetect -y 1

gives

     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- -- 
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
20: -- -- -- -- -- -- -- -- -- 29 -- -- -- -- -- -- 
30: -- -- -- -- -- -- -- -- -- -- -- -- 3c -- -- -- 
40: 40 -- -- -- -- -- -- -- -- -- -- -- 4c -- -- -- 
50: -- -- -- -- 54 -- -- -- -- -- -- -- -- -- -- -- 
60: -- -- -- -- -- -- -- -- 68 -- -- -- -- -- -- -- 
70: 70 -- -- -- -- -- -- 77

For the Petoi chip addresses start at https://docs.petoi.com/nyboard/nyboard-v1_1 
Petoi Nyboard-v1_1 devices are those with * below.

29: VL53L0X rangefinder
3c: OLED_0in91 display
40: * PCA9685 PWM generator 
4c: i2c-ltc2990 A->D converter
54: * AT24C64 EEPROM
68: * MPU6050 accelerometer
70: ???
77: ???


Arduino addresses and other useful stuff from OpenCat.h
=======================================================
 
 
These are for NyBoard_V1_0

#define IR_PIN    4   // Signal Pin of IR receiver to Arduino Digital Pin 4
#define BUZZER    5

#define SOUND A2
#define LIGHT A3

#define VOLTAGE_DETECTION_PIN A7
#define LOW_VOLTAGE 650
#define DEVICE_ADDRESS 0x54       //I2C Address of eeprom chip
#define BAUD_RATE 115200
#define NEOPIXEL_PIN 10 //the code for NeoPixels have to be shrinked to fit in the board
#define NUMPIXELS 7


Test programs
=============

In the folder Experiments.

Read voltages:

python3 i2c-ltc2990.py

Display: 

.../OLED_Module_Code/RaspberryPi/python/example $ python3 OLED_0in91_test.py

Range:

$ cd VL53L0X-python/python
$ python3 VL53L0X_example.py

Camera: 

$ cd Camera
$ python3 camera.py

Servos:

$ python3 servo_test.py

Accelerometer:

$ python3 accelerometer_test.py


Report IP address on OLED display
=================================

In /etc/rc.local:

sudo python3 /home/pi/Walking-robots/Petoi/Software/Pi/Experiments/OLED_Module_Code/RaspberryPi/python/example/display-ip.py > /dev/null &


Running the web-based interactive control
=========================================

Note that /var/www/html/Petoi is a symlink to ...../Walking-robots/Petoi/Software/Pi/www

Running the simulator:
----------------------

In .../Walking-robots/Petoi/Software/Pi/www

$ python3 petoi-server.py s

Then in a browser go to

http://localhost/Petoi/

Running the actual robot:
-------------------------

$ ssh pi@[I.P. on OLED display]
$ cd /var/www/html/Petoi
$ python3 petoi-server.py

Then in a browser go to 

http://[I.P. on OLED display]/Petoi/








